{{#section 'css'}}
{{!-- slider slick --}}
<link href="/pages/page-product-detail/style.css" rel="stylesheet" />
<link href="/pages/page-home/style.css" rel="stylesheet" />
<link href="/components/component-product.css" rel="stylesheet" />
<link href="/components/component-comment.css" rel="stylesheet" />
<link href="/components/component-evaluation-form.css" rel="stylesheet" />
{{!-- slider slick --}}
{{/section}}

<section class="sec-product-detail bg0 p-b-60">
	<div class="container basic-info-product">
		<div class="row">
			<div class="col-md-6 col-lg-7 p-b-30">
				<div class="p-l-25 p-r-30 p-lr-0-lg">
					<div class="wrap-slick3 flex-sb flex-w">
						<div class="wrap-slick3-dots"></div>
						{{!-- <div class="wrap-slick3-arrows flex-sb-m flex-w"></div> --}}

						<div class="slick3 gallery-lb">
							{{#each item.img}}
							<div class="item-slick3" data-thumb={{this}}>
								<div class="wrap-pic-w pos-relative">
									<img src={{this}} alt="IMG-PRODUCT">

									<a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04"
										href={{this}}>
										<i class="fa fa-expand"></i>
									</a>
								</div>
							</div>
							{{/each}}
						</div>
					</div>
				</div>
			</div>

			<div class="col-md-6 col-lg-5 ">
				<div class="p-lr-0-lg">
					<h4 class="name js-name-detail">
						{{item.name}}
					</h4>
					<div class="row p-l-15" style="font-size: 16px; margin-bottom: 30px;">
						<span>
							4.75&nbsp;
							<i class="fa fa-star icon-star"></i>
						</span>
						<span class="m-r-30 m-l-30">|</span>
						<span>{{item.bought}} Đã bán</span>
					</div>
					{{#if item.price}}
					<span class="price js-cost">
						{{formatPrice item.price}}<u>đ</u>
					</span>
					<span class="original-price js-cost ml-3">
						<del>{{formatPrice item.originalPrice}}<u>đ</u></del>
					</span>
					{{else}}
					<span class="price js-cost ml-3">
						{{formatPrice item.originalPrice}}<u>đ</u>
					</span>
					{{/if}}
					<!--  -->
					<div class="p-t-30">
						<div class="m-b-25">
							<div class="select-component">
								<h4 class="tag">Kích cỡ</h4>
								{{!-- <div class="size-button-component">
									<button class="btn-size size-selected m-l-18" id="size-S">S</button>
									<button class="btn-size m-l-18" id="size-M">M</button>
									<button class="btn-size m-l-18" id="size-L">L</button>										
								</div> --}}
								<div class="select-button-component">
									{{#checkEquality item.size.length 3}}
									{{#each item.size}}
									<button class="btn-size" id={{this}}>{{this}}</button>
									{{/each}}
									{{else }}
									<div class="form-group">
										<select class="form-control">
											{{#each item.size}}
											<option value={{this}}>{{this}}</option>
											{{/each}}
										</select>
									</div>
									{{/checkEquality}}
								</div>
							</div>
						</div>
					</div>
					<div class="m-b-25">
						<div class="select-component">
							<h4 class="tag">Màu sắc</h4>
							<div class="select-button-component">
								{{#checkEquality item.color.length 3}}
								{{#each item.color}}
								<button class="btn-color">{{this}}</button>
								{{/each}}
								{{else }}
								<div class="form-group">
									{{!-- <label for="exampleFormControlSelect1">Chọn kích cỡ</label> --}}
									<select class="form-control">
										{{#each item.color}}
										<option>{{this}}</option>
										{{/each}}
									</select>
								</div>
								{{/checkEquality}}
							</div>
						</div>
					</div>

					<div class="flex-w flex-r-m p-b-25">
						<form action="/product/detail/{{item._id}}" method="POST" class="flex-w flex-m respon6-next">
							<div class="select-component">
								<h4 class="tag">Số lượng</h4>
								<div class="wrap-num-product flex-w">
									<div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
										<i class="fs-16 zmdi zmdi-minus"></i>
									</div>

									<input class="mtext-104 cl3 txt-center num-product" type="number" id="num"
										name="num" value="1">

									<div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">
										<i class="fs-16 zmdi zmdi-plus"></i>
									</div>
								</div>
							</div>
							<div class="m-t-50"
								style="display: flex; align-items: center; justify-content: space-between; width: 100%">
								<button type="submit" class="btn-add-to-cart flex-c-m m-r-28 js-addcart-detail">
									<i class="fa fa-shopping-cart m-r-5"></i>
									Thêm vào giỏ hàng
								</button>
								<button type="submit" class="btn-buy-now flex-c-m js-addcart-detail">
									Mua ngay
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container product-detail-component">
		<h2>Chi tiết sản phẩm</h2>
		<div class="data">
			<div class="items-detail">
				<div class="item">
					<h3 class="title">Xuất xứ</h3>
					<h3 class="value">Việt Nam</h3>
				</div>
				<div class="item">
					<h3 class="title">Thương hiệu</h3>
					<h3 class="value">No brand</h3>
				</div>
				<div class="item">
					<h3 class="title">Chất liệu</h3>
					<h3 class="value">Cotton</h3>
				</div>
			</div>
			<div class="items-detail">
				<div class="item">
					<h3 class="title">Màu sắc</h3>
					<h3 class="value">{{item.color}}</h3>
				</div>
				<div class="item">
					<h3 class="title">Kích cỡ</h3>
					<h3 class="value">{{item.size}}</h3>
				</div>
				<div class="item">
					<h3 class="title">Kho hàng</h3>
					<h3 class="value">20</h3>
				</div>
			</div>
		</div>
	</div>

	<div class="container product-description-component">
		<h2>Mô tả sản phẩm</h2>
		<p>{{item.description}}</p>
	</div>

	<div class="container evaluation-component">
		<h2>Đánh giá sản phẩm</h2>
		<div class="evaluation">
			<div class="average-rating">
				<h1>{{ratings.averageStar}}/5 <i class="fa fa-star icon-star"></i></h1>
				<h4 class="m-t-5">({{ratings.reviewQuantity}} bình luận)</h4>
			</div>
			<div class="detail-rating">
				{{#each ratings.bars}}
				<div class="item-detail-rating">
					<div class="star">
						{{this.number}}
						<i class="fa fa-star icon-star"></i>
					</div>
					<div class="progress my-process">
						<div class="progress-bar my-process-bar" role="progressbar" style="width: {{percent}}%"
							aria-valuenow={{this.percent}} aria-valuemin="0" aria-valuemax="100"></div>
					</div>
					<div class="percent">{{percent}}%</div>
				</div>
				{{/each}}
			</div>
			<div class="evaluation-button-component">
				<h3>Chia sẻ nhận xét của bạn về sản phẩm</h3>
				<button data-toggle="collapse" href="#collapseReview" role="button" aria-expanded="false"
					aria-controls="collapseReview" class="component-default-button">
					Viết nhận xét
				</button>
			</div>
		</div>
		{{!-- Form đánh giá về sản phẩm --}}
		<div class="evaluation-form-component collapse" id="collapseReview">
			<form class="evaluation-form clearfix" id ="review-form" idP={{id}}>
				<div class="top">
					<h4>Nhận xét của bạn</h4>
				</div>
				<div class="evaluation-start">
					<p>Đánh giá của bạn</p>
					<div class="stars">
						<div>
							<input class="star star-5" id="star-5" s="5" type="radio" name="star" checked />
							<label class="star star-5" for="star-5"></label>
							<input class="star star-4" id="star-4" s="4" type="radio" name="star" />
							<label class="star star-4" for="star-4"></label>
							<input class="star star-3" id="star-3" s="3" type="radio" name="star" />
							<label class="star star-3" for="star-3"></label>
							<input class="star star-2" id="star-2" s="2" type="radio" name="star" />
							<label class="star star-2" for="star-2"></label>
							<input class="star star-1" id="star-1" s="1" type="radio" name="star" />
							<label class="star star-1" for="star-1"></label>
						</div>
					</div>
				</div>
				<div class="evaluation-title">
					{{!-- <p>Tiêu đề</p> --}}
					<input type="text" class="title" name="title" placeholder="Tiêu đề (không bắt buộc)" />
				</div>
				<div class="evaluation-content">
					{{!-- <p>Nội dung</p> --}}
					<textarea row="5" type="text" class="content" name="content"
						placeholder="Nhận xét của bạn về sản phẩm"></textarea>
				</div>
				<div class="evaluation-button">
					<button type="submit" class="send-evaluation component-default-button" id="send-form-btn">Gửi nhận xét</button>
				</div>
			</form>
		</div>
		{{!-- Danh sách bình luận --}}

		<div class="comments-component">
			{{#each reviews}}
				{{#if this.isAccepted}}
				<div class="comment">
					<div class="comment-item">
					<div class="my-photo">
						<a href="#"><img class="img-circle" src="{{this.avatar}}" alt="My Image" /></a>
						<h5>{{this.name}}</h5>
						<p class="time">{{this.formatDate}}</p>
					</div>
					<div class="information clearfix">
						<p class="review">Comment của bạn đang được duyệt, vui lòng chờ giây lát....</p>
					</div>
				</div>
				{{else}}
				<div class="comment">
					<div class="comment-item">
						<div class="my-photo">
							<a href="#"><img class="img-circle" src="{{this.avatar}}" alt="My Image" /></a>
							<h5>{{this.name}}</h5>
							<p class="time">{{this.formatDate}}</p>
						</div>
						<div class="information clearfix">
							<div style="display: flex; align-items: center;">
								<div class="stars">
									{{#each checkedRatingStars}}
									<span class="fa fa-star icon-star"></span>
									{{/each}}
									{{#each uncheckedRatingStars}}
									<span class="fa fa-star icon-grey-star"></span>
									{{/each}}
								</div>
								<p class="review">{{this.title}}</p>
							</div>
							<p class="buy-already">Đã mua sản phẩm này tại Unicorn Shop</p>
							<div class="description js-description">
								{{!-- <p class="review_detail" itemprop="reviewBody"></p> --}}
								<span>{{this.content}}</span>
							</div>
							{{#if this.reply}}
							<button data-toggle="collapse" href="#collapseReply-{{this._id}}" role="button"
								aria-expanded="false" aria-controls="collapseReply-{{this._id}}" class="show-comment">
								Xem phản hồi
							</button>
							{{/if}}
						</div>
					</div>

					<div class="reply-comment-component collapse" id="collapseReply-{{this._id}}">
						{{#each reply}}
						<div class="reply-comment">
							<div class="my-photo">
								<a href="#"><img class="img-circle" src="{{this.avatar}}" alt="My Image" /></a>
								<h5>Unicorn Shop</h5>
								<p class="time">{{this.formatDate}}</p>
							</div>
							<div class="information">
								<p class="from-us">Phản hồi từ Unicorn Shop</p>
								<span>{{this.content}}</span>
							</div>
						</div>

						<div class="input-comment-component clearfix">
							<div class="input-comment">
								<div class="my-photo">
									<a href="#"><img class="img-circle" src="/images/customer.jpg" alt="My Image" /></a>
								</div>
								<textarea rows="3" placeholder="Nhập phản hồi"></textarea>
							</div>
							<button class="public-comment component-default-button">Gửi phản hồi</button>
						</div>
						{{/each}}
					</div>

				</div>
				{{/if}}
			{{/each}}
		</div>
	</div>



	<div class="container product-relate-component">
		<div class="title">
			<div class="inner">
				<h2>Sản phẩm liên quan</h2>
				<a href="/product">Xem tất cả&ensp;<i class="zmdi zmdi-chevron-right"></i></a>
			</div>
		</div>

		<!-- Slide2 -->
		<div class="content">
			<div class="row">
				{{#each productRelates}}
				<div class="col-6 col-sm-6 col-md-6 col-lg-4 col-xl-3 d-flex" id={{this.catergory}}>
					<div class="component-product card">
						<div class="product-image">
							<img data-toggle="tooltip" title="{{this.name}}" src="{{this.img}}" class="card-img-top"
								alt="...">
							<a href="/product/detail/{{this._id}}" class="stretched-link"></a>
							<div class="deal-tag">{{this.salePercent}}%</div>
							<div class="hover-div">
								<a href="#"><i class="fas fa-shopping-cart"></i>&ensp;Mua hàng</a>
								<div>&nbsp;|&nbsp;</div>
								<a href="/product/detail/{{this._id}}" class="mr-3"><i class="far fa-eye"></i>&ensp;Chi
									tiết</a>
							</div>
						</div>

						<div class="card-body">
							<a href="/product/detail/{{this._id}}" class="card-title m-0">{{this.name}}</a>
							<div class="m-0 mt-1 d-flex justify-content-center">
								<span class="sale-price">{{formatPrice this.price}}<u>đ</u></span>
								<span class="original-price ml-3 js-cost">
									{{formatPrice this.originalPrice}}<u>đ</u>
								</span>
							</div>
							<button class="btn favorite-btn"><i class="far fa-heart"></i></button>
						</div>
					</div>
				</div>
				{{/each}}
			</div>
		</div>
	</div>
</section>


{{#section 'js'}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>
{{!-- <script src="/pages/page-product-detail/evaluation-form.js"></script> --}}
<script src="/pages/page-product-detail/select-size-button.js"></script>
<script src="/pages/page-product-detail/comment.js"></script>
{{/section}}